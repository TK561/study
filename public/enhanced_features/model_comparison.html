<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>機械学習モデル比較インターフェース</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        .model-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        .model-card {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        .model-card.selected {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
        }
        .model-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        .chart-section {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .full-width { grid-column: 1 / -1; }
        .metrics-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .metrics-table th,
        .metrics-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ccc;
        }
        .metrics-table th {
            background: #f8f9fa;
            font-weight: bold;
        }
        .performance-bar {
            height: 20px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 5px 0;
        }
        .performance-fill {
            height: 100%;
            background: linear-gradient(45deg, #667eea, #764ba2);
            transition: width 0.5s ease;
        }
        .experiment-controls {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        .control-group {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        .btn {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🤖 機械学習モデル比較インターフェース</h1>
        <p>複数のモデルの性能を同時比較し、最適なアプローチを特定します</p>
        
        <!-- モデル選択 -->
        <div class="model-selector">
            <div class="model-card selected" data-model="wordnet-clip">
                <h3>WordNet+CLIP</h3>
                <p>提案手法</p>
                <small>階層構造活用</small>
            </div>
            <div class="model-card" data-model="resnet50">
                <h3>ResNet50</h3>
                <p>ベースライン</p>
                <small>従来CNN</small>
            </div>
            <div class="model-card" data-model="efficientnet">
                <h3>EfficientNet</h3>
                <p>効率重視</p>
                <small>軽量モデル</small>
            </div>
            <div class="model-card" data-model="vit">
                <h3>Vision Transformer</h3>
                <p>Transformer</p>
                <small>注意機構</small>
            </div>
            <div class="model-card" data-model="clip-baseline">
                <h3>CLIP Baseline</h3>
                <p>マルチモーダル</p>
                <small>標準CLIP</small>
            </div>
        </div>
        
        <!-- 実験制御 -->
        <div class="experiment-controls">
            <h3>🧪 実験設定</h3>
            <div class="control-group">
                <label>データセット:</label>
                <select id="datasetSelect">
                    <option value="custom">カスタムデータセット</option>
                    <option value="pascal">Pascal VOC</option>
                    <option value="coco">MS COCO</option>
                    <option value="imagenet">ImageNet</option>
                </select>
                
                <label>評価指標:</label>
                <select id="metricSelect">
                    <option value="accuracy">精度</option>
                    <option value="f1">F1スコア</option>
                    <option value="precision">適合率</option>
                    <option value="recall">再現率</option>
                </select>
                
                <button class="btn" onclick="runComparison()">🚀 比較実験実行</button>
            </div>
        </div>
        
        <!-- 比較結果 -->
        <div class="comparison-grid">
            <!-- 精度比較チャート -->
            <div class="chart-section">
                <h3>📊 精度比較</h3>
                <canvas id="accuracyComparisonChart" style="height: 300px;"></canvas>
            </div>
            
            <!-- 速度比較チャート -->
            <div class="chart-section">
                <h3>⚡ 処理速度比較</h3>
                <canvas id="speedComparisonChart" style="height: 300px;"></canvas>
            </div>
            
            <!-- レーダーチャート -->
            <div class="chart-section">
                <h3>🎯 総合性能レーダー</h3>
                <canvas id="radarChart" style="height: 300px;"></canvas>
            </div>
            
            <!-- 詳細メトリクス -->
            <div class="chart-section">
                <h3>📋 詳細メトリクス</h3>
                <table class="metrics-table">
                    <thead>
                        <tr>
                            <th>モデル</th>
                            <th>精度</th>
                            <th>F1スコア</th>
                            <th>処理時間</th>
                            <th>メモリ使用量</th>
                        </tr>
                    </thead>
                    <tbody id="metricsTableBody">
                        <!-- 動的に生成 -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- カテゴリ別詳細比較 -->
        <div class="chart-section full-width">
            <h3>📂 カテゴリ別性能比較</h3>
            <canvas id="categoryComparisonChart" style="height: 400px;"></canvas>
        </div>
    </div>

    <script>
        // モデルデータ
        const modelData = {
            'wordnet-clip': {
                name: 'WordNet+CLIP',
                accuracy: 87.1,
                f1: 86.8,
                speed: 32.1,
                memory: 3.1,
                categories: [92.1, 88.7, 94.3, 84.2, 89.8]
            },
            'resnet50': {
                name: 'ResNet50',
                accuracy: 74.2,
                f1: 73.5,
                speed: 23.4,
                memory: 2.1,
                categories: [78.3, 72.1, 79.8, 68.5, 74.9]
            },
            'efficientnet': {
                name: 'EfficientNet',
                accuracy: 76.8,
                f1: 76.2,
                speed: 31.2,
                memory: 1.8,
                categories: [80.1, 74.8, 81.2, 71.3, 76.8]
            },
            'vit': {
                name: 'Vision Transformer',
                accuracy: 78.5,
                f1: 78.1,
                speed: 45.8,
                memory: 3.4,
                categories: [82.5, 76.9, 83.1, 73.8, 79.2]
            },
            'clip-baseline': {
                name: 'CLIP Baseline',
                accuracy: 82.1,
                f1: 81.7,
                speed: 28.7,
                memory: 2.8,
                categories: [85.7, 80.3, 87.1, 78.9, 82.4]
            }
        };
        
        let selectedModels = ['wordnet-clip'];
        
        // モデル選択処理
        document.querySelectorAll('.model-card').forEach(card => {
            card.addEventListener('click', function() {
                const model = this.dataset.model;
                if (selectedModels.includes(model)) {
                    if (selectedModels.length > 1) {
                        selectedModels = selectedModels.filter(m => m !== model);
                        this.classList.remove('selected');
                    }
                } else {
                    selectedModels.push(model);
                    this.classList.add('selected');
                }
                updateCharts();
            });
        });
        
        // チャート初期化
        const accuracyChart = new Chart(document.getElementById('accuracyComparisonChart'), {
            type: 'bar',
            data: { labels: [], datasets: [] },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true, max: 100 }
                }
            }
        });
        
        const speedChart = new Chart(document.getElementById('speedComparisonChart'), {
            type: 'horizontalBar',
            data: { labels: [], datasets: [] },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: { beginAtZero: true }
                }
            }
        });
        
        const radarChart = new Chart(document.getElementById('radarChart'), {
            type: 'radar',
            data: { labels: ['精度', '速度', 'メモリ効率', 'F1スコア'], datasets: [] },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: { beginAtZero: true, max: 100 }
                }
            }
        });
        
        const categoryChart = new Chart(document.getElementById('categoryComparisonChart'), {
            type: 'line',
            data: { 
                labels: ['animal', 'object', 'person', 'vehicle', 'nature'],
                datasets: []
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { beginAtZero: true, max: 100 }
                }
            }
        });
        
        function updateCharts() {
            const colors = ['#667eea', '#e74c3c', '#2ecc71', '#f39c12', '#9b59b6'];
            
            // 精度チャート更新
            accuracyChart.data.labels = selectedModels.map(m => modelData[m].name);
            accuracyChart.data.datasets = [{
                label: '精度 (%)',
                data: selectedModels.map(m => modelData[m].accuracy),
                backgroundColor: colors.slice(0, selectedModels.length)
            }];
            accuracyChart.update();
            
            // 速度チャート更新
            speedChart.data.labels = selectedModels.map(m => modelData[m].name);
            speedChart.data.datasets = [{
                label: '処理時間 (ms)',
                data: selectedModels.map(m => modelData[m].speed),
                backgroundColor: colors.slice(0, selectedModels.length)
            }];
            speedChart.update();
            
            // レーダーチャート更新
            radarChart.data.datasets = selectedModels.map((model, index) => ({
                label: modelData[model].name,
                data: [
                    modelData[model].accuracy,
                    100 - modelData[model].speed, // 速度は逆転（小さいほど良い）
                    100 - modelData[model].memory * 10, // メモリ効率
                    modelData[model].f1
                ],
                borderColor: colors[index],
                backgroundColor: colors[index] + '20'
            }));
            radarChart.update();
            
            // カテゴリ別チャート更新
            categoryChart.data.datasets = selectedModels.map((model, index) => ({
                label: modelData[model].name,
                data: modelData[model].categories,
                borderColor: colors[index],
                backgroundColor: colors[index] + '20',
                tension: 0.4
            }));
            categoryChart.update();
            
            // メトリクステーブル更新
            updateMetricsTable();
        }
        
        function updateMetricsTable() {
            const tbody = document.getElementById('metricsTableBody');
            tbody.innerHTML = '';
            
            selectedModels.forEach(modelKey => {
                const model = modelData[modelKey];
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td><strong>${model.name}</strong></td>
                    <td>${model.accuracy}%</td>
                    <td>${model.f1}%</td>
                    <td>${model.speed}ms</td>
                    <td>${model.memory}GB</td>
                `;
            });
        }
        
        function runComparison() {
            // 実験実行シミュレーション
            document.querySelector('.btn').textContent = '🔄 実行中...';
            document.querySelector('.btn').disabled = true;
            
            setTimeout(() => {
                // ランダムなバリエーション追加
                Object.keys(modelData).forEach(key => {
                    modelData[key].accuracy += (Math.random() - 0.5) * 2;
                    modelData[key].f1 += (Math.random() - 0.5) * 2;
                    modelData[key].speed += (Math.random() - 0.5) * 4;
                });
                
                updateCharts();
                document.querySelector('.btn').textContent = '🚀 比較実験実行';
                document.querySelector('.btn').disabled = false;
            }, 2000);
        }
        
        // 初期化
        updateCharts();
    </script>
</body>
</html>