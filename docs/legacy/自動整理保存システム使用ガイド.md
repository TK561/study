# 🔄 自動整理・保存システム 使用ガイド

## 📋 システム概要

**目的**: ユーザーが「ファイルとフォルダ整理」「やったことの保存」のどちらを要求しても、**両方を自動実行**するシステム

## 🚀 使用方法

### 基本実行
```bash
python3 auto_organize_and_save.py
```

### キーワード指定実行
```bash
# 整理優先で実行
python3 auto_organize_and_save.py "ファイル整理"

# 保存優先で実行  
python3 auto_organize_and_save.py "作業を保存"

# 両方同時実行
python3 auto_organize_and_save.py "整理と保存"
```

## 🎯 対応キーワード

### 整理関連キーワード
- 「整理」「ファイル」「フォルダ」「削除」
- 「cleanup」「organize」

### 保存関連キーワード  
- 「保存」「記録」「やったこと」「作業」
- 「save」「記録」

## 🔧 実行内容

### 1️⃣ ファイル・フォルダ整理
- **一時ファイル削除**: `temp_*`, `test_*`, `old_*` パターン
- **空ディレクトリ削除**: 保護対象外の空フォルダ
- **バックアップ統合**: 重複バックアップフォルダの統合
- **安全なバックアップ**: 削除前に自動バックアップ作成

### 2️⃣ セッション作業保存
- **Git変更状況**: `git status`, `git diff` の記録
- **今日更新ファイル**: 本日作成・更新されたファイル一覧
- **システム出力収集**: 研究システムの出力結果収集
- **重要ファイルバックアップ**: 核となるファイルの自動保護

## 📄 生成されるファイル

### セッション記録
- `sessions/AUTO_SESSION_SAVE_YYYY-MM-DD.md`
  - Git変更状況
  - 今日更新されたファイル (最新20件)
  - システム出力結果
  - 実行されたアクション記録

### 実行ログ
- `auto_execution_log_YYYYMMDD_HHMMSS.json`
  - 詳細な実行ログ（JSON形式）
  - エラー・警告情報
  - 処理されたファイル一覧

### バックアップ
- `auto_backup_YYYYMMDD_HHMMSS/` - 削除ファイルのバックアップ
- `important_backup_YYYYMMDD_HHMMSS/` - 重要ファイルのバックアップ
- `consolidated_backups/` - 統合バックアップフォルダ

## 🛡️ 保護機能

### 保護されるディレクトリ
```
system/implementations/  # 研究システム
study/                   # 研究内容
sessions/               # セッション記録  
public/                 # デプロイメント
config/                 # 設定ファイル
logs/                   # ログファイル
```

### 自動バックアップ対象
```
CLAUDE.md                                    # Claude設定
README.md                                   # プロジェクト概要
WordNet-Based_Semantic_Image_Classification_Research_Presentation.pptx
system/implementations/integrated_research_system.py
study/research_discussions/WEEKLY_DISCUSSION_SUMMARY.md
```

## 🎮 実行パターン

### 固定実行順序
**どの要求でも必ず同じ順序で実行されます:**
1. **ファイル・フォルダ整理**（第1ステップ）
2. **セッション作業保存**（第2ステップ）

```bash
# どのコマンドでも同じ順序で実行
python3 auto_organize_and_save.py "ファイル整理"
python3 auto_organize_and_save.py "やったことを保存"  
python3 auto_organize_and_save.py "整理と保存"
python3 auto_organize_and_save.py
```

**実行順序**: 常にファイル整理 → セッション保存

## 📊 実行結果例

```
🚀 自動整理・保存システム 起動
============================================================
📋 検出された要求: both_equal

📍 実行順序: ファイル整理 → セッション保存
🧹 ファイル・フォルダ自動整理開始...
  ✅ 削除: system/temp_analysis.py
  🗂️ 空ディレクトリ削除: 3件
  📦 バックアップ統合: quick_backup
✅ ファイル整理完了: 4件処理

💾 セッション作業自動保存開始...
  💾 重要ファイルバックアップ: 5件
✅ セッション保存完了: AUTO_SESSION_SAVE_2025-06-25.md

============================================================
🎉 自動整理・保存完了
============================================================
📊 実行サマリー:
  🧹 整理: 4件処理
  💾 保存: 2件
  📦 バックアップ: 5件
  ⚠️ エラー: 0件

📄 詳細ログ: auto_execution_log_20250625_235500.json
📋 セッション記録: AUTO_SESSION_SAVE_2025-06-25.md

✅ 次回は「ファイルとフォルダ整理」「やったことの保存」どちらの要求でも自動実行されます
```

## 🔍 トラブルシューティング

### よくあるエラー

1. **権限エラー**
   ```bash
   # 実行権限を付与
   chmod +x auto_organize_and_save.py
   ```

2. **Git情報取得失敗**
   - Gitリポジトリが初期化されていない場合
   - 自動的に「Git情報取得エラー」として記録

3. **ファイルアクセスエラー** 
   - 使用中のファイルは自動的にスキップ
   - エラーログに記録

### 安全性

- **削除前バックアップ**: すべての削除対象を事前にバックアップ
- **保護ディレクトリ**: 重要ディレクトリは削除対象外
- **段階的実行**: エラー時も部分的に処理継続
- **詳細ログ**: すべての操作を記録

## 🎯 応用例

### 研究プロジェクトでの活用
```bash
# セッション終了時
python3 auto_organize_and_save.py "今日の作業を整理して保存"

# 定期メンテナンス
python3 auto_organize_and_save.py "プロジェクトクリーンアップ"

# 緊急バックアップ
python3 auto_organize_and_save.py "重要ファイル保存"
```

### CLAUDE.md設定
```markdown
## 🔄 自動整理・保存システム
**ユーザーが「ファイルとフォルダ整理」「やったことの保存」のどちらを要求しても両方を自動実行**

### 自動実行コマンド
```bash
python3 auto_organize_and_save.py
```
```

## 📈 システムの利点

1. **効率性**: 1コマンドで両方の作業を完了
2. **安全性**: 削除前の自動バックアップ
3. **完全性**: Git状況・ファイル更新・システム出力をすべて記録
4. **柔軟性**: ユーザー意図に応じた実行順序調整
5. **継続性**: セッション間の作業継続を支援

---

**次回から「ファイルとフォルダ整理」「やったことの保存」どちらの要求でも、このシステムが自動的に両方を実行します** ✅